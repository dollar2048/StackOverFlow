//
//  MessageManager.m
//  StackOverFlow
//
//  Created by Sergei Prikhodko on 25.11.15.
//  Copyright Â© 2015 Sergei Prikhodko. All rights reserved.
//

#import "MessageManager.h"
#import <AFNetworking/AFNetworking.h>
#import "QuestionItem.h"
#import "AnswerItem.h"

#define kDUMP @"{\"items\":[{\"owner\":{\"reputation\":443,\"profile_image\":\"https://i.stack.imgur.com/GIzbD.png?s=128&g=1\",\"display_name\":\"Mrozu\"},\"is_answered\":false,\"last_activity_date\":1448797183,\"creation_date\":1448797183,\"question_id\":33982358,\"title\":\"Window SizeToContent issue when child UserControl has grid with Column of max Width\",\"body\":\"<p>Sorry for very long title of question but I had no idea how to make it shorter.</p>\\n\\n<p>I have <strong>SettingsView</strong> Window with content control:</p>\\n\\n<pre><code>&lt;Window x:Class=\\\"IsoMan.UI.Settings.Views.SettingsView\\\"\\n    xmlns=\\\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\\\"\\n    xmlns:x=\\\"http://schemas.microsoft.com/winfx/2006/xaml\\\"\\n    Title=\\\"SettingsView\\\" WindowStartupLocation=\\\"CenterOwner\\\"\\n    SizeToContent=\\\"WidthAndHeight\\\"&gt;\\n    &lt;ContentControl Name=\\\"ContentControl\\\"/&gt;\\n&lt;/Window&gt;\\n</code></pre>\\n\\n<p>Here in code-behind I am setting content of ContentControl:</p>\\n\\n<pre><code>public partial class SettingsView : Window\\n{\\n    public SettingsView()\\n    {\\n        InitializeComponent();   \\n        ContentControl.Content = new UserSettingsView();\\n    }\\n}\\n</code></pre>\\n\\n<p>Here is my <strong>UserSettingsView.xaml</strong>, the control that is a child of <strong>SettingsView</strong>:</p>\\n\\n<pre><code>&lt;UserControl x:Class=\\\"IsoMan.UI.Settings.UserSettings.Views.UserSettingsView\\\"\\n        xmlns=\\\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\\\"\\n        xmlns:x=\\\"http://schemas.microsoft.com/winfx/2006/xaml\\\"\\n        MinHeight=\\\"400\\\" MinWidth=\\\"700\\\"&gt;\\n    &lt;DataGrid ItemsSource=\\\"{Binding UsersList}\\\" AutoGenerateColumns=\\\"False\\\" CanUserAddRows=\\\"False\\\" CanUserDeleteRows=\\\"False\\\" &gt;\\n        &lt;DataGrid.Columns&gt;\\n            &lt;DataGridTextColumn Header=\\\"Name\\\" Binding=\\\"{Binding FirstName}\\\" Width=\\\"*\\\"/&gt;\\n        &lt;/DataGrid.Columns&gt;\\n    &lt;/DataGrid&gt;\\n&lt;/UserControl&gt;\\n</code></pre>\\n\\n<p><strong>And here is my problem.</strong></p>\\n\\n<p>I have Window SizeToContent set to WidthAndHeight, because I want it\'s size to adjust to child control size (in this case UserSettingsView).</p>\\n\\n<p>UserSettingsView has MinWidth/MinHeight set as I want user to not be able to make it smaller (buttons/grid presentation). This control has grid with one column which width is \\\"*\\\". I want it to take all available space.</p>\\n\\n<p><strong>What happens now:</strong></p>\\n\\n<p>After showing SettingsView it\'s width is MAX width of my screen. I think that it is cased by the fact, that grid\'s column\'s width in UserSettingsView is set to \\\"*\\\".</p>\\n\\n<p><strong>What I want to achieve:</strong></p>\\n\\n<p>After showing SettingsView it\'s width should be MinWidth of UserSettingsView. Also, when user try to resize SettingsView window, child control UserSettingsView should be resized also.</p>\\n\"},{\"owner\":{\"reputation\":137,\"profile_image\":\"https://www.gravatar.com/avatar/964efb07957d3853dcbb712a29c062f1?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"Enuy\"},\"is_answered\":false,\"last_activity_date\":1448795850,\"creation_date\":1448795850,\"question_id\":33982167,\"title\":\"PyQt5: Create semi-transparent window with non-transparent children\",\"body\":\"<p>I want to create a fullscreen window with semitransparent background, but fully visible children widgets (kind of overlay effect).</p>\\n\\n<p>Here\'s what I have so far:</p>\\n\\n<pre><code>import sys\\n\\nfrom PyQt5.QtCore import *\\nfrom PyQt5.QtGui import *\\nfrom PyQt5.QtWidgets import *\\n\\napp = QApplication(sys.argv)\\n\\n# Create the main window\\nwindow = QMainWindow()\\n\\nwindow.setWindowOpacity(0.3)\\nwindow.setAttribute(Qt.WA_NoSystemBackground, True)\\nwindow.setWindowFlags(Qt.FramelessWindowHint)\\n\\n# Create the button\\npushButton = QPushButton(window)\\npushButton.setGeometry(QRect(240, 190, 90, 31))\\npushButton.setText(\\\"Finished\\\")\\npushButton.clicked.connect(app.quit)\\n\\n# Center the button\\nqr = pushButton.frameGeometry()\\ncp = QDesktopWidget().availableGeometry().center()\\nqr.moveCenter(cp)\\npushButton.move(qr.topLeft())\\n\\n# Run the application\\nwindow.showFullScreen()\\nsys.exit(app.exec_())\\n</code></pre>\\n\\n<p>This creates a semi-transparent effect, but even the button is semi-transparent.</p>\\n\\n<p>I also tried to substitute the</p>\\n\\n<pre><code>window.setWindowOpacity(0.3)\\n</code></pre>\\n\\n<p>with this call</p>\\n\\n<pre><code>window.setAttribute(Qt.WA_TranslucentBackground, True)\\n</code></pre>\\n\\n<p>but to no avail, in this case the background was <em>fully transparent</em> (while the button was correctly fully visible).</p>\\n\"},{\"owner\":{\"reputation\":67,\"profile_image\":\"https://www.gravatar.com/avatar/2460b4836660eaf2d77086028366d110?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"dark_space\"},\"is_answered\":false,\"last_activity_date\":1448794511,\"creation_date\":1448794511,\"question_id\":33981970,\"title\":\"Scrolling to bottom of page according to window height\",\"body\":\"<p>I want to use to programmatically scroll to bottom of a web page based on the window size. Supposedly, after every scroll, a screenshot will be taken, until the bottom of page is reached.  </p>\\n\\n<pre><code>    //return clientHeight + non-visible height due to overflow (document height)\\n    Long scrollH = (Long)jse.executeScript(\\\"return Math.max(\\\"\\n        + \\\"document.body.scrollHeight, document.documentElement.scrollHeight,\\\"\\n        + \\\"document.body.offsetHeight, document.documentElement.offsetHeight,\\\"\\n        + \\\"document.body.clientHeight, document.documentElement.clientHeight);\\\"\\n    );\\n\\n    //return visible height of content + visible padding but not the horizontal scrollbar height, border, or margin\\n    Long clientH = (Long)jse.executeScript(\\\"return document.documentElement.clientHeight\\\");\\n\\n    //check if scrollHeight is greater than clientHeight\\n    Boolean check = (Boolean)jse.executeScript(\\\"return Math.max(\\\"\\n        + \\\"document.body.scrollHeight, document.documentElement.scrollHeight,\\\"\\n        + \\\"document.body.offsetHeight, document.documentElement.offsetHeight,\\\"\\n        + \\\"document.body.clientHeight, document.documentElement.clientHeight) &gt; document.documentElement.clientHeight\\\");\\n\\n    int index = 1;\\n    if(check){\\n        while(scrollH.intValue() &gt; 0){\\n            screenshot.capture();\\n            jse.executeScript(\\\"window.scrollTo(0,\\\" + clientH * index + \\\")\\\");    \\n            scrollH  = scrollH - clientH;\\n            index++;\\n        }\\n    } \\n</code></pre>\\n\\n<p><strong>Problem</strong> Taking this page for eg. <a href=\\\"https://www.youtube.com/all_comments?v=Qx4z-glA474\\\" rel=\\\"nofollow\\\">https://www.youtube.com/all_comments?v=Qx4z-glA474</a> the screenshots taken will not match sequentially, meaning there will be <strong>a small gap in between the shots</strong> as shown below. </p>\\n\\n<p><a href=\\\"http://i.stack.imgur.com/CsQhm.png\\\" rel=\\\"nofollow\\\"><img src=\\\"http://i.stack.imgur.com/CsQhm.png\\\" alt=\\\"screenshot_1\\\"></a></p>\\n\\n<p><a href=\\\"http://i.stack.imgur.com/ERy2E.png\\\" rel=\\\"nofollow\\\"><img src=\\\"http://i.stack.imgur.com/ERy2E.png\\\" alt=\\\"wrong_screenshot_2\\\"></a><a href=\\\"http://i.stack.imgur.com/iM83h.png\\\" rel=\\\"nofollow\\\"><img src=\\\"http://i.stack.imgur.com/iM83h.png\\\" alt=\\\"correct_screenshot_2\\\"></a></p>\\n\\n<p><strong>Attempts</strong></p>\\n\\n<ol>\\n<li>compared scrollheight to offsetheight instead </li>\\n<li>changed scrollheight to <code>Long scrollHeight = (Long)jse.executeScript(\\\"return $(\'#body-container\') [0].scrollHeight\\\");</code></li>\\n<li>used innerheight instead of clientheight</li>\\n</ol>\\n\\n<p>All gave me the same results as above.</p>\\n\\n<p>How can I make it scroll accordingly to the height of a window in a Youtube page?</p>\\n\"},{\"owner\":{\"reputation\":3,\"profile_image\":\"https://lh3.googleusercontent.com/-AQC_hLPC_6U/AAAAAAAAAAI/AAAAAAAAAYo/W6YhWer-99I/photo.jpg?sz=128\",\"display_name\":\"dimas suprianto\"},\"is_answered\":false,\"last_activity_date\":1448793372,\"creation_date\":1448716090,\"question_id\":33971651,\"title\":\"invoke detailview from window controller xaf\",\"body\":\"<p>there.</p>\\n\\n<p>let me have a question about xaf.\\nas you read on my title.</p>\\n\\n<p>i want to invoke detailview of nonpersistent class from my windowcontroller.\\nis there any way to do this ?</p>\\n\\n<p>i\'m using xaf with C#.</p>\\n\\n<p>big thanks!</p>\\n\"},{\"owner\":{\"reputation\":1,\"profile_image\":\"https://www.gravatar.com/avatar/c1211b7fb5e9d2331ed20538a1fa7783?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"M.Mido\"},\"is_answered\":false,\"last_activity_date\":1448792957,\"creation_date\":1448792957,\"question_id\":33981746,\"title\":\"CMake window issue in Ubuntu terminal\",\"body\":\"<p>I am using a Ubuntu virtual machine (Oracle VM Virtual Box Manager), via Windows 10. My laptop is 64bit.</p>\\n\\n<p>I am trying to make work a ccmake on its terminal. It has been well-installed using sudo ...</p>\\n\\n<p>But when I go to my build project and write ccmake .., it says to me that:\\nWindow is too small. A size of at least 65X6 is required to run ccmake.</p>\\n\\n<p>What is the Window that it\'s talking about? How to fix this issue?</p>\\n\\n<p>Thanks</p>\\n\"},{\"owner\":{\"reputation\":1,\"profile_image\":\"https://www.gravatar.com/avatar/7161cf66b8518a1f7064358f53d2cfd7?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"Ruby\"},\"is_answered\":false,\"last_activity_date\":1448789724,\"creation_date\":1448789724,\"question_id\":33981333,\"title\":\"How and where to add Named Window using EPL in NEsper?\",\"body\":\"<p>I already have the createstatement function and have successfully detect a simple event. My problem now is to process the complex event using EPL. I need to process the simple and complex event at the same process. I thought I can use namedwindow to process it. But, my problem is I don\'t know how and where I want to fit in the namedwindow command inside my program since I not yet mastering the EPL language and NEsper. I hope someone can help me. Thank you.</p>\\n\"},{\"owner\":{\"reputation\":374,\"profile_image\":\"https://www.gravatar.com/avatar/581d0deaf3f067db7b4bf62faf6b1043?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"Optimuskck\"},\"is_answered\":false,\"last_activity_date\":1448789101,\"creation_date\":1448789101,\"question_id\":33981239,\"title\":\"Is it possible to place components randomly without container in Swing window builder?\",\"body\":\"<p>From what i learned so far only way to put a JButton or a JLabel is via create the GUI Structure through Containers and place on it? . is there are other method to add component randomly into the frame and resize accordingly like Visual C#? if yes what is the method to do it?</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":446,\"profile_image\":\"https://www.gravatar.com/avatar/e9c114e264b9772f60998dbaa327c080?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"dxiv\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448780433,\"last_edit_date\":1448780433,\"creation_date\":1448778452,\"answer_id\":33980060,\"question_id\":33979302},{\"owner\":{\"reputation\":1066,\"profile_image\":\"https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1\",\"display_name\":\"milevyo\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448788437,\"last_edit_date\":1448788437,\"creation_date\":1448783783,\"answer_id\":33980631,\"question_id\":33979302}],\"owner\":{\"reputation\":10,\"profile_image\":\"https://www.gravatar.com/avatar/c9c5bab70133f33674ad3bc8c31d1e3e?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"user4780006\"},\"is_answered\":false,\"last_activity_date\":1448788437,\"creation_date\":1448770050,\"question_id\":33979302,\"title\":\"Dragging the console window with ReadConsoleInput()\",\"body\":\"<p>As you can see from the code snippet below, I\'ve implemented a way to drag the Windows command prompt by its client area.</p>\\n\\n<p>The problem with this code is that if the user follows these steps:</p>\\n\\n<ol>\\n<li>Unfocus console window</li>\\n<li>Focus console window by clicking and dragging it (without releasing)</li>\\n<li>Drag the window so that the cursor escapes window area (this can mean moving the cursor too quickly, or out of the set bounds (second monitor), or over the taskbar/other always-on-top window)</li>\\n</ol>\\n\\n<p>The console window will stop following the cursor, until it\'s moved to be inside the window again.</p>\\n\\n<p>The fact that this does not happen when the console window is already in-focus at step 1, is what\'s really weird to me. I\'ve tried debugging this for so many hours now, I just can\'t do it anymore. I\'d appreciate any help regarding this.</p>\\n\\n<pre><code>// Continuously read input\\nwhile(ReadConsoleInput(hIn, &amp;ir, 1, &amp;nr))\\n{\\n    switch(ir.EventType)\\n    {\\n        // Left mouse button down that either focuses or unfocuses console window\\n        case FOCUS_EVENT:\\n            // Left mouse button down that focuses console window\\n            if(ir.Event.FocusEvent.bSetFocus)\\n            {\\n                GetCursorPos(&amp;firstPos);\\n                ScreenToClient(hWnd, &amp;firstPos);\\n            }\\n            break;\\n        case MOUSE_EVENT:\\n            // Mouse did something inside console window\\n            switch(ir.Event.MouseEvent.dwButtonState)\\n            {\\n                // Left mouse button down or up\\n                case FROM_LEFT_1ST_BUTTON_PRESSED:\\n                    // Left mouse down or up, no drag\\n                    if(!ir.Event.MouseEvent.dwEventFlags)\\n                    {\\n                        GetCursorPos(&amp;firstPos);\\n                        ScreenToClient(hWnd, &amp;firstPos);\\n                    }\\n                    // Left button down, and mouse move. -&gt; drag\\n                    if(ir.Event.MouseEvent.dwEventFlags == MOUSE_MOVED)\\n                    {\\n                        GetCursorPos(&amp;currentRelativeToScreen);\\n\\n                        // Calculate window position while dragging\\n                        // |\\n                        // v\\n                        if(currentRelativeToScreen.x - firstPos.x &gt; scrnSz.right - ca.right)\\n                            wndPos.X = scrnSz.right - ca.right;\\n                        else if(currentRelativeToScreen.x - firstPos.x &lt; 0)\\n                            wndPos.X = 0;\\n                        else\\n                            wndPos.X = currentRelativeToScreen.x - firstPos.x;\\n\\n                        if(currentRelativeToScreen.y - firstPos.y &gt; scrnSz.bottom - ca.bottom)\\n                            wndPos.Y = scrnSz.bottom - ca.bottom;\\n                        else if(currentRelativeToScreen.y - firstPos.y &lt; 0)\\n                            wndPos.Y = 0;\\n                        else\\n                            wndPos.Y = currentRelativeToScreen.y - firstPos.y;\\n                        // End window position calculations\\n\\n                        SetWindowPos(hWnd, 0, wndPos.X, wndPos.Y, 0, 0, SWP_NOSIZE | SWP_NOZORDER);\\n                    }\\n                    break;\\n                default:\\n                    break;\\n            }\\n            break;\\n        default:\\n            break;\\n    }\\n</code></pre>\\n\"},{\"owner\":{\"reputation\":66,\"profile_image\":\"https://www.gravatar.com/avatar/b72ad6720893a6dbb8cf7073e859af13?s=128&d=identicon&r=PG\",\"display_name\":\"BraCa\"},\"is_answered\":false,\"last_activity_date\":1448782846,\"creation_date\":1448719067,\"question_id\":33972153,\"title\":\"struct Equality operator Immediate Window weird behaviour\",\"body\":\"<p>I\'m doing some experiments with structs and operators, and I came across a situation that I cannot understand.</p>\\n\\n<p>I have a struct that only contains an <code>int</code>. I\'ve also implemteted \'implicit operator\' methods so I can assign an <code>int</code> directly to it and I\'ve implemented the Equality operators</p>\\n\\n<p>Everything seems to be working fine at runtime, but if I make a breakpoint, and execute this <code>((TestStruct)1) == ((TestStruct)1);</code> in the Immediate Window it returns false, but at runtime it returns true (as I was expecting).</p>\\n\\n<p>If I put another breakpoint, on the Equality operator, I can see that the code in there is being executed, but the values for my structs are not \'1\' as I was expecting, but some random ones.</p>\\n\\n<p>Here is my sample code:</p>\\n\\n<pre><code>class Program\\n{\\n    static void Main(string[] args)\\n    {\\n        bool areEqual = ((TestStruct)1) == ((TestStruct)1);\\n        string breakPoint = \\\";)\\\";\\n    }\\n}\\n\\nstruct TestStruct\\n{\\n    private Int32 value;\\n    public TestStruct(Int32 value)\\n    {\\n        this.value = value;\\n    }\\n\\n    static public implicit operator TestStruct(Int32 value)\\n    {\\n        return new TestStruct(value);\\n    }\\n\\n    public static bool operator ==(TestStruct ptr1, TestStruct ptr2)\\n    {\\n        return ptr1.value == ptr2.value;\\n    }\\n    public static bool operator !=(TestStruct ptr1, TestStruct ptr2)\\n    {\\n        return ptr1.value != ptr2.value;\\n    }\\n}\\n</code></pre>\\n\\n<p><strong>Edit</strong> It seems to work fine if used with VS 2013, this issue seems to occur only with VS 2015</p>\\n\\n<p><a href=\\\"http://i.stack.imgur.com/01EEz.gif\\\" rel=\\\"nofollow\\\"><img src=\\\"http://i.stack.imgur.com/01EEz.gif\\\" alt=\\\"Demonstration\\\"></a></p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":6701,\"profile_image\":\"https://www.gravatar.com/avatar/271d88c4888422ccac04b597511e9c19?s=128&d=identicon&r=PG\",\"display_name\":\"Calvin1602\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1307607530,\"creation_date\":1307607530,\"answer_id\":6289957,\"question_id\":6287660},{\"owner\":{\"reputation\":6701,\"profile_image\":\"https://www.gravatar.com/avatar/271d88c4888422ccac04b597511e9c19?s=128&d=identicon&r=PG\",\"display_name\":\"Calvin1602\"},\"is_accepted\":false,\"score\":3,\"last_activity_date\":1307781846,\"creation_date\":1307781846,\"answer_id\":6315001,\"question_id\":6287660},{\"owner\":{\"reputation\":187964,\"profile_image\":\"https://i.stack.imgur.com/peLE7.jpg?s=128&g=1\",\"display_name\":\"Ben Voigt\"},\"is_accepted\":true,\"score\":4,\"last_activity_date\":1307842112,\"last_edit_date\":1307842112,\"creation_date\":1307804406,\"answer_id\":6316595,\"question_id\":6287660},{\"owner\":{\"reputation\":1384,\"profile_image\":\"https://i.stack.imgur.com/S9Xba.jpg?s=128&g=1\",\"display_name\":\"vexe\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448771451,\"creation_date\":1448771451,\"answer_id\":33979429,\"question_id\":6287660}],\"owner\":{\"reputation\":558,\"profile_image\":\"https://www.gravatar.com/avatar/4b44530018596ba8844c9803d3b487db?s=128&d=identicon&r=PG\",\"display_name\":\"I Phantasm I\"},\"is_answered\":true,\"last_activity_date\":1448771451,\"creation_date\":1307588454,\"question_id\":6287660,\"title\":\"Win32 opengl Window creation\",\"body\":\"<p>What is the best way to set up a window in win32 that has OpenGl(and glsl if the needs extra code to work) integrated into it?</p>\\n\\n<p>I have done some research and found numerous ways of accomplishing this task i was wondering what the best way is or what way you like the most if the best way doesn\'t have an answer.</p>\\n\\n<p>I have looked at nehe`s design and also the one supplied by the OpenGl super bible which both have completely different ways of accomplishing it (also the super bibles one gives me errors :().</p>\\n\\n<p>any help would be appreciated including tutorials etc.  </p>\\n\\n<p>thanks</p>\\n\"},{\"owner\":{\"reputation\":236,\"profile_image\":\"https://www.gravatar.com/avatar/9b006b2541a05741aee9ceaf0e549067?s=128&d=identicon&r=PG\",\"display_name\":\"The Cappy\"},\"is_answered\":false,\"last_activity_date\":1448770551,\"creation_date\":1448770551,\"question_id\":33979359,\"title\":\"When multiple NSTextViews are present in a window, the one receiving typed keys isn&#39;t necessarily the one receiving command-keys. Why?\",\"body\":\"<p>I am having a hard time understanding the responder chain in OS X. </p>\\n\\n<p>I have an NSTextView subclass, and I want it to respond to a command-key and do something. I\'ve created a very simple demonstration of my problem. Anyone interested can see if with only a couple minute\'s effort. </p>\\n\\n<p>Create a new OS X project, and here is the only additional code you need. Make a new class in Swift named MyTextView (subclass of NSTextView) and paste this into it:</p>\\n\\n<pre><code>import Cocoa\\n\\nclass MyTextView: NSTextView {\\n\\n    // listen for a command key\\n    override func performKeyEquivalent(theEvent: NSEvent) -&gt; Bool {\\n\\n        // if it\'s a cmd-equals, change the background\\n        if theEvent.characters == \\\"=\\\" &amp;&amp; theEvent.modifierFlags.contains(.CommandKeyMask) {\\n            Swift.print(theEvent)\\n            self.backgroundColor = NSColor(calibratedRed: CGFloat(arc4random()) / CGFloat(UInt32.max),\\n                green: CGFloat(arc4random()) / CGFloat(UInt32.max),\\n                blue: CGFloat(arc4random()) / CGFloat(UInt32.max),\\n                alpha: 1.0)\\n            return true\\n        }\\n        return super.performKeyEquivalent(theEvent)\\n    }\\n}\\n</code></pre>\\n\\n<p>Now in your storyboard, place 2 or more NSTextViews into the same contentView. Under the Identity Inspector, <strong>tell each NSTextView its class is MyTextView</strong> (the NSTextView is nested a bit: NSScrollView > NSClipView > NSTextView).</p>\\n\\n<p>Run the project. Hit cmd-equal. One of the textviews changes its background color, but it isn\'t necessarily the one that possesses the cursor, which is receiving all the other key-presses. It isn\'t necessarily the one that starts out with the cursor. And if you place the cursor in a different textView, it still doesn\'t change which one responds to the command key.</p>\\n\\n<p>Why is that? Why isn\'t the textview that\'s receiving the typed keystrokes the same textview that\'s receiving the command-keys? Clearly the textviews know who is supposed to be receiving the keystrokes, because typing works. But my command-key goes to somebody else.</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":12677,\"profile_image\":\"https://www.gravatar.com/avatar/cbf6917a7f41a098677c63e32bfba873?s=128&d=identicon&r=PG\",\"display_name\":\"Victor Hurdugaci\"},\"is_accepted\":true,\"score\":6,\"last_activity_date\":1445928304,\"last_edit_date\":1445928304,\"creation_date\":1439422192,\"answer_id\":31977109,\"question_id\":31957824},{\"owner\":{\"reputation\":53,\"profile_image\":\"https://www.gravatar.com/avatar/3e45fc8d3f4e1298c1a94575a277e28e?s=128&d=identicon&r=PG\",\"display_name\":\"Tom\"},\"is_accepted\":false,\"score\":3,\"last_activity_date\":1439561636,\"creation_date\":1439561636,\"answer_id\":32012208,\"question_id\":31957824},{\"owner\":{\"reputation\":81,\"profile_image\":\"https://www.gravatar.com/avatar/3a1aae69c04384b6684d98e46bf53da4?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"P Walker\"},\"is_accepted\":false,\"score\":6,\"last_activity_date\":1439947143,\"creation_date\":1439947143,\"answer_id\":32085043,\"question_id\":31957824},{\"owner\":{\"reputation\":19,\"profile_image\":\"https://lh3.googleusercontent.com/-xU8L3CsZsoQ/AAAAAAAAAAI/AAAAAAAAAoM/tCUDTPY5qgs/photo.jpg?sz=128\",\"display_name\":\"Mohd Anzal\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448767876,\"last_edit_date\":1448767876,\"creation_date\":1448725291,\"answer_id\":33973157,\"question_id\":31957824}],\"owner\":{\"reputation\":397,\"profile_image\":\"https://i.stack.imgur.com/Cpr1F.jpg?s=128&g=1\",\"display_name\":\"Srigopal Chitrapu\"},\"is_answered\":true,\"last_activity_date\":1448767876,\"creation_date\":1439361911,\"question_id\":31957824,\"title\":\"The Dnx Runtime package needs to be installed. See output window for more details\",\"body\":\"<p>I\'m using Visual Studio 2015 Enterprise Edition and created simple Asp.net5 application. When I try to debug I\'m getting this error.</p>\\n\\n<p>\\\"The Dnx Runtime package needs to be installed. See output window for more details.\\\"\\nHere are my project settings:</p>\\n\\n<p>Solution DNX SDK Version : 1.0.0-beta5,\\nPlatform : .NET Core\\nArchitecture : x64 (Tried with x86 as well)\\nAlso followed the steps mentioned in <a href=\\\"http://www.sblackler.net/2015/05/02/Up-And-Running-With-DNX-DNVM-DNU/\\\">this link</a> but they didn\'t help.</p>\\n\\n<p>Tried reinstalling VS2015 as well, but no luck. Any idea what I\'m missing?</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":1221,\"profile_image\":\"https://www.gravatar.com/avatar/2706cb4f2a1de054929a6a4a504234d1?s=128&d=identicon&r=PG\",\"display_name\":\"codewarrior\"},\"is_accepted\":true,\"score\":1,\"last_activity_date\":1448767491,\"creation_date\":1448767491,\"answer_id\":33979091,\"question_id\":33970690}],\"owner\":{\"reputation\":669,\"profile_image\":\"https://www.gravatar.com/avatar/0ea8916aa743159019c14db1655c6c29?s=128&d=identicon&r=PG\",\"display_name\":\"naveen tamanam\"},\"is_answered\":true,\"last_activity_date\":1448767491,\"creation_date\":1448709479,\"question_id\":33970690,\"title\":\"Why python executable opens new window instance when function by multiprocessing module is called on windows\",\"body\":\"<p>Short Question: Why python executable generated by pyinstaller opens new window instance when function by multiprocessing module is called on windows operating system </p>\\n\\n<p>I have a GUI code written using pyside. Where when we click on simple button it will calculate factorial in another process (using multiprocessing module).\\nIt works as expected when I run python program. But after I create executable using PyInstaller and when I run using exe it is creating new window when function by multiprocessing module gets called. Here is the code and step by step process to reproduce the issue. </p>\\n\\n<p>Code: </p>\\n\\n<pre><code>import sys\\nimport multiprocessing\\n\\nfrom PySide import QtGui\\nfrom PySide import QtCore\\n\\n\\ndef factorial():\\n        f = 4\\n        r = 1\\n        for i in reversed(range(1, f+1)):\\n            r *= i \\n        print \'factorial\', r\\n\\n\\nclass MainGui(QtGui.QWidget):\\n    def __init__(self):\\n        super(MainGui, self).__init__()\\n\\n        self.initGui()\\n\\n    def initGui(self):\\n        b = QtGui.QPushButton(\'click\', self)\\n        b.move(30, 30)\\n        b.clicked.connect(self.onClick)\\n        self.resize(600, 400)\\n        self.show()\\n\\n    def onClick(self):\\n        print \'button clicked\'\\n        self.forkProcess()\\n\\n    def forkProcess(self):\\n        p = multiprocessing.Process(target=factorial)\\n        p.daemon = True\\n        p.start()\\n\\n\\n\\nif __name__ == \\\"__main__\\\":\\n    print \'ok\'\\n\\n    app = QtGui.QApplication(sys.argv)\\n    ex = MainGui()\\n    sys.exit(app.exec_())\\n</code></pre>\\n\\n<ol>\\n<li><p>Run the above code using windows command prompt or power shell</p>\\n\\n<p>pyinstaller.exe gui.py</p></li>\\n<li><p>Open the  dist/gui/gui.exe (dist\\\\gui\\\\gui.exe). You will have one window opens</p></li>\\n</ol>\\n\\n<p><a href=\\\"http://i.stack.imgur.com/gJoIZ.png\\\" rel=\\\"nofollow\\\"><img src=\\\"http://i.stack.imgur.com/gJoIZ.png\\\" alt=\\\"enter image description here\\\"></a></p>\\n\\n<p>When we click on button <strong>click</strong> it\'s calculating factorial but create a new window instance. It\'s weird. It\'s not happening when I execute program before I create executable or on linux. It\'s only happening when I execute generated python executable file </p>\\n\\n<p>The screen shot after I click <strong>click</strong> button</p>\\n\\n<p><a href=\\\"http://i.stack.imgur.com/3Y7bH.png\\\" rel=\\\"nofollow\\\"><img src=\\\"http://i.stack.imgur.com/3Y7bH.png\\\" alt=\\\"enter image description here\\\"></a></p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":12402,\"profile_image\":\"https://i.stack.imgur.com/relWs.jpg?s=128&g=1\",\"display_name\":\"furas\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448587164,\"creation_date\":1448587164,\"answer_id\":33949097,\"question_id\":33948899},{\"owner\":{\"reputation\":786,\"profile_image\":\"https://lh6.googleusercontent.com/-_ceYetsPxZc/AAAAAAAAAAI/AAAAAAAAACQ/WjKu3LiDIH0/photo.jpg?sz=128\",\"display_name\":\"Steven Summers\"},\"is_accepted\":true,\"score\":2,\"last_activity_date\":1448723082,\"last_edit_date\":1448723082,\"creation_date\":1448589094,\"answer_id\":33949258,\"question_id\":33948899}],\"owner\":{\"reputation\":394,\"profile_image\":\"https://lh4.googleusercontent.com/-nT_-2fs9ykY/AAAAAAAAAAI/AAAAAAAAABI/n9DanYw3AEk/photo.jpg?sz=128\",\"display_name\":\"Jonah Fleming\"},\"is_answered\":true,\"last_activity_date\":1448766284,\"creation_date\":1448585197,\"question_id\":33948899,\"title\":\"Why doesn&#39;t this centre the window?\",\"body\":\"<p>I am using this code to centre my screen as shown in <a href=\\\"http://stackoverflow.com/questions/12533532/how-to-center-a-tkinter-window-and-retain-the-fit-to-children-behavior\\\">this</a> post and my <a href=\\\"http://stackoverflow.com/questions/33932516/typeerror-not-all-arguments-converted-during-string-formatting-when-entering/33932698#33932698\\\">question</a> but to my surprise it doesn\'t centre the window exactly. It puts it in the lower right hand corner not the centre exactly. Why is this? </p>\\n\\n<pre><code> top1=Toplevel(root)\\n w = top1.winfo_screenwidth()\\n h = top1.winfo_screenheight()\\n topsize = tuple(int(_) for _ in top1.geometry().split(\'+\')[0].split(\'x\'))\\n x = w/2 - topsize[0]/2\\n y = h/2 - topsize[1]/2\\n top1.geometry(\\\"+%d+%d\\\" % (topsize[0]+x, topsize[1]+y))\\n</code></pre>\\n\\n<blockquote>\\n  <p>Final Solution by Steven Summers</p>\\n</blockquote>\\n\\n<pre><code>import Tkinter as tk\\n\\n\\ndef center_window(win):\\n    w = win.winfo_screenwidth()\\n    h = win.winfo_screenheight()\\n    x = w/2 - win.winfo_width()/1-150\\n    y = h/2 - win.winfo_height()/1-200\\n    win.geometry(\\\"+%d+%d\\\" % (x, y))\\n\\nroot = tk.Tk()\\ntop1 = tk.Toplevel(root)\\ntop1.title(\'TopLevel Window 1\')\\ntop1.minsize(300, 300)\\n\\nb = tk.Label(top1, text=\'Here is a Label\')\\nb.pack()\\nl = tk.Button(top1, text=\'Click Me\')\\nl.pack()\\n\\ntop1.after(1, lambda: center_window(top1))\\n\\nroot.mainloop()\\n</code></pre>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":181,\"profile_image\":\"https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"Franco\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448646949,\"creation_date\":1448646949,\"answer_id\":33962663,\"question_id\":33939657},{\"owner\":{\"reputation\":181,\"profile_image\":\"https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"Franco\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448764944,\"last_edit_date\":1448764944,\"creation_date\":1448751628,\"answer_id\":33977445,\"question_id\":33939657}],\"owner\":{\"reputation\":174,\"profile_image\":\"https://www.gravatar.com/avatar/a1c278e670ac9113b61a1026e17fc204?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"Jordan Vit\"},\"is_answered\":false,\"last_activity_date\":1448764944,\"creation_date\":1448543608,\"question_id\":33939657,\"title\":\"Showing carousel in modal window and ajax request\",\"body\":\"<p>I\'m not even sure if I\'m on right way with this and I\'m very new in ajax/jquery stuff. </p>\\n\\n<p>What I trying is to load on one page 20 thumbnails from category. When user click on the thumb it is showed in full size on modal. Then I want user to be able to see next image from that category. </p>\\n\\n<p>Now when I click on image it just showing empty popup and no errors in console.</p>\\n\\n<p>So this is where I show images from the category</p>\\n\\n<pre><code>        // some other code here\\n$result = $pdo-&gt;prepare(\\\"SELECT * FROM images WHERE image_album = ? ORDER BY image_id ASC LIMIT 24\\\");\\n$result -&gt; bindParam(1, $album_id, PDO::PARAM_INT);\\n$result-&gt;execute();\\necho \'\\n   &lt;div id=\\\"gallery\\\" class=\\\"section-scroll main-section\\\"&gt;\\n      &lt;section id=\\\"gallery-wrapper\\\" class=\\\"\\\"&gt;       \\n         &lt;div class=\\\"gallery-content three-columns\\\"&gt;\';\\n    for($i=0; $row = $result-&gt;fetch(); $i++)\\n    {\\n        echo \'            \\n            &lt;a class=\\\"mix category-2 open-overlay\\\" href=\\\"ajax-gallery.php\\\" &gt;\\n            &lt;img width=\\\"1000\\\" height=\\\"600\\\" src=\\\"images/gallery/\'.$row[\'image_name\'].\'\\\" data-src=\\\"images/gallery/\'.$row[\'image_name\'].\'\\\"/&gt;\\n                &lt;div class=\\\"hidden-xs\\\"&gt;\\n                    &lt;div&gt;\\n                        &lt;span&gt;&lt;h3&gt;Full size&lt;/h3&gt;&lt;/span&gt;\\n                    &lt;/div&gt;\\n                &lt;/div&gt;\\n            &lt;/a&gt;\';\\n    }\\n        // some more code\\n</code></pre>\\n\\n<p>Then in <code>ajax-gallery.php</code> I have</p>\\n\\n<pre><code>if(!empty($_POST[\\\"album_id\\\"]) &amp;&amp; !empty($_POST[\\\"image_id\\\"])) {\\n\\n$album_id = $_POST[\'album_id\'];            \\n$image = $_POST[\'image_id\'];\\n\\n    $value = $pdo-&gt;prepare(\'SELECT * FROM images WHERE image_album = ? ORDER BY image_id = ? ASC\');\\n    $value-&gt;bindParam(1, $album_id, PDO::PARAM_INT);\\n    $value-&gt;bindParam(2, $image_id, PDO::PARAM_INT);\\n    $value-&gt;execute();\\n    $result = $value-&gt;fetch();    \\n\\n    foreach ($result as $row)\\n    {\\n        echo \'\\n        &lt;section id=\\\"gallery\\\"&gt;\\n            &lt;div class=\\\"gallery-content fullscreen\\\"&gt;&lt;a class=\\\"close-button\\\"&gt;&lt;i class=\\\"icon-close\\\"&gt;&lt;/i&gt;&lt;/a&gt;\\n                &lt;div class=\\\"gallery\\\"&gt;\\n                    &lt;div class=\\\"loading-spinner\\\"&gt;&lt;/div&gt;\\n                    &lt;div id=\\\"images\\\" class=\\\"owl-carousel\\\"&gt;\\n                        &lt;div class=\\\"item\\\"&gt;&lt;figure&gt;&lt;img src=\\\"images/gallery/\'.$row[\'image_name\'].\'\\\" /&gt;&lt;/figure&gt;&lt;/div&gt;\\n                    &lt;/div&gt;\\n                    &lt;div class=\\\"controls\\\"&gt;&lt;/div&gt;\\n                &lt;/div&gt;\\n            &lt;/div&gt;\\n        &lt;/section&gt;      \\n        \';\\n    }\\n</code></pre>\\n\\n<p>HTML in the echo in <code>ajax-gallery.php</code> is the carousel when user click on thumbnail.</p>\\n\\n<p>This is js part and I\'m sure it is wrong.</p>\\n\\n<pre><code>$(document).ready(function(){\\n$(\'#gallery, #a\').click(function() {\\n   $.post(\'ajax-gallery.php\',\\n        {\\n            \\\"album_id\\\": $(this).attr(\'album_id\'),\\n            \\\"image_id\\\": $(this).attr(\'image_id\')\\n        },\\n        function (response) {\\n\\n        });\\n });\\n});\\n</code></pre>\\n\\n<p>Update:</p>\\n\\n<p>This is when you point on the thumb\\n<a href=\\\"http://i.stack.imgur.com/YI5dM.jpg\\\" rel=\\\"nofollow\\\"><img src=\\\"http://i.stack.imgur.com/YI5dM.jpg\\\" alt=\\\"enter image description here\\\"></a></p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":46,\"profile_image\":\"https://www.gravatar.com/avatar/3f6786d35c5e4f08fdfa8d320f556441?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"kiran\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1387794719,\"creation_date\":1387794719,\"answer_id\":20741631,\"question_id\":20738656}],\"owner\":{\"reputation\":1,\"profile_image\":\"https://www.gravatar.com/avatar/d0f124b992124cbf52e0ec56a5ad383c?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"user3128718\"},\"is_answered\":false,\"last_activity_date\":1448755811,\"creation_date\":1387782774,\"question_id\":20738656,\"title\":\"Unable to switch window in Selenium web driver\",\"body\":\"<p>I have the following homework:</p>\\n\\n<blockquote>\\n  <ul>\\n  <li>Write a program using Selenium Webdriver</li>\\n  <li>Open up the \\\"parent.htm\\\" file in Firefox.</li>\\n  <li>Then click the \\\"Open Modal Popup\\\" button.</li>\\n  <li>In the pop-up, click \\\"Open Modal Popup\\\" again.</li>\\n  <li>Close all windows by clicking the Close buttons in the Pop-Ups</li>\\n  </ul>\\n</blockquote>\\n\\n<p>Code done till now:</p>\\n\\n<pre><code>import java.util.List;\\n\\nimport java.util.Set;\\n\\n\\n\\nimport org.openqa.selenium.By;\\n\\nimport org.openqa.selenium.JavascriptExecutor;\\n\\nimport org.openqa.selenium.WebDriver;\\n\\nimport org.openqa.selenium.WebElement;\\n\\nimport org.openqa.selenium.chrome.ChromeDriver;\\n\\nimport org.openqa.selenium.firefox.FirefoxDriver;\\n\\nimport org.openqa.selenium.internal.seleniumemulation.JavascriptLibrary;\\n\\n\\n\\npublic class popup_test {\\n\\npublic static void main(String args[]) throws InterruptedException{\\n\\nparent();\\n\\n}\\n\\npublic static void parent() throws InterruptedException{\\n\\nSystem.setProperty(\\\"webdriver.chrome.driver\\\",\\\"C:\\\\\\\\jars\\\\\\\\chromedriver.exe\\\");\\n\\nWebDriver driver = new ChromeDriver();\\n\\n//WebDriver driver = new FirefoxDriver();\\n\\ndriver.get(\\\"C:\\\\\\\\Users\\\\\\\\jain\\\\\\\\Desktop\\\\\\\\popup\\\\\\\\parent.htm\\\");\\n\\nThread.sleep(1000);\\n\\nString winHandleBefore1 = driver.getWindowHandle();\\n\\ndriver.findElement(By.id(\\\"OpenPopupButton\\\")).click();\\n\\nSet&lt;String&gt; winHandleColl_After = driver.getWindowHandles();\\n\\nObject[] ObjHwndvals=winHandleColl_After.toArray();\\n\\nObject Objhwnd=ObjHwndvals[1];\\n\\nString strHwnd=(String) Objhwnd;\\n\\ndriver=driver.switchTo().window(strHwnd);\\n\\ndriver.findElement(By.id(\\\"OpenPopupButton\\\")).click();\\n\\n\\n\\nwinHandleColl_After = driver.getWindowHandles();\\n\\nObjHwndvals=winHandleColl_After.toArray();\\n\\nObject Objhwnd3=ObjHwndvals[2];\\n\\nString strHwnd3=(String) Objhwnd;\\n\\ndriver.switchTo().window(strHwnd3).findElement(By.id(\\\"MyModalPopup\\\")).click();\\n\\ndriver.switchTo().window(strHwnd).findElement(By.id(\\\"MyModalPopup\\\")).click();\\n\\n}\\n</code></pre>\\n\\n<p><strong>Files</strong>: Please save this as .htm extension \\nparent: </p>\\n\\n<pre><code>&lt;html&gt;\\n&lt;title&gt;Parent Window&lt;/title&gt;\\n\\n&lt;script type=\\\"text/javascript\\\" language=\\\"javascript\\\"&gt;\\n\\n   function openPopUpWithSize(theURL, title, heightInPX, widthInPX)\\n   {\\n   window.showModalDialog(theURL, title, \'dialogHeight=\' + heightInPX + \'px;dialogWidth=\'+ widthInPX + \'px\');\\n   }\\n&lt;/script&gt;\\n\\n&lt;body&gt;\\n\\n&lt;div&gt;\\n&lt;input type=\\\"button\\\" id=\\\"OpenPopupButton\\\" value=\\\"Open Modal Popup\\\" onclick=\\\"openPopUpWithSize(\'child.htm\', \'Simple Modal Popup Example\', 400, 500);\\\" /&gt;\\n&lt;/div&gt;\\n&lt;/body&gt;\\n&lt;/html&gt;\\n</code></pre>\\n\\n<p>child: </p>\\n\\n<pre><code>&lt;html&gt;\\n&lt;title&gt;Child Window&lt;/title&gt;\\n\\n&lt;script type=\\\"text/javascript\\\" language=\\\"javascript\\\"&gt;\\n\\n  function openPopUpWithSize(theURL, title, heightInPX, widthInPX)\\n  {\\n    window.showModalDialog(theURL, title, \'dialogHeight=\' + heightInPX + \'px;dialogWidth=\'+ widthInPX + \'px\');\\n  }\\n  function closePopup() {\\n    window.close();\\n    return false;\\n  }\\n\\n&lt;/script&gt;\\n\\n&lt;body&gt;\\n\\n&lt;div&gt;\\n&lt;input type=\\\"button\\\" id=\\\"OpenPopupButton\\\" value=\\\"Open Modal Popup\\\" onclick=\\\"openPopUpWithSize(\'child.htm\', \'Simple Modal Popup Example\', 400, 500);\\\" /&gt;\\n\\n&lt;input type=\\\"button\\\" id=\\\"MyModalPopup\\\" value=\\\"Close\\\" onclick=\\\"closePopup();\\\" /&gt;\\n&lt;/div&gt;\\n\\n&lt;/body&gt;\\n&lt;/html&gt;\\n</code></pre>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":10219,\"profile_image\":\"https://i.stack.imgur.com/aCfir.jpg?s=128&g=1\",\"display_name\":\"jeremycg\"},\"is_accepted\":true,\"score\":1,\"last_activity_date\":1448752395,\"last_edit_date\":1448752395,\"creation_date\":1448750877,\"answer_id\":33977326,\"question_id\":33976461}],\"owner\":{\"reputation\":1470,\"profile_image\":\"https://www.gravatar.com/avatar/11aa0ee8770168d76af34960b18b8cbd?s=128&d=identicon&r=PG\",\"display_name\":\"sharoz\"},\"is_answered\":true,\"last_activity_date\":1448752395,\"creation_date\":1448744867,\"question_id\":33976461,\"title\":\"Find the variance over a sliding window in dplyr\",\"body\":\"<p>I want to find the variance of the previous three values in a group.</p>\\n\\n<pre><code># make some data with categories a and b\\nlibrary(dplyr)\\ndf = expand.grid(\\n  a = LETTERS[1:3],\\n  index = 1:10\\n)\\n# add a variable that changes within each group\\nset.seed(9999)\\ndf$x = runif(nrow(df))\\n\\n# get the variance of a subset of x\\nvarSubset = function(x, index, subsetSize) {\\n  subset = (index-subsetSize+1):index\\n  ifelse(subset[1]&lt;1, -1, var(x[subset]))\\n}\\n\\ndf %&gt;%\\n  # group the data\\n  group_by(a) %&gt;%\\n  # get the variance of the 3 most recent values\\n  mutate(var3 = varSubset(x, index, 3))\\n</code></pre>\\n\\n<p>It\'s calling the <code>varSubset</code> with both <code>x</code> and <code>index</code> as vectors.</p>\\n\\n<p>I can\'t figure out how to treat <code>x</code> as a vector (of only the group) and <code>index</code> as a single value. I\'ve tried <code>rowwise()</code>, but then I effectively lose grouping.</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":1239,\"profile_image\":\"https://i.stack.imgur.com/SLbs6.jpg?s=128&g=1\",\"display_name\":\"Nitai J. Perez\"},\"is_accepted\":true,\"score\":0,\"last_activity_date\":1448749546,\"creation_date\":1448749546,\"answer_id\":33977125,\"question_id\":33975393}],\"owner\":{\"reputation\":6,\"profile_image\":\"https://www.gravatar.com/avatar/ba4774821fcb8e165695c0c9d04aa285?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"umaximus\"},\"is_answered\":true,\"last_activity_date\":1448752044,\"creation_date\":1448738210,\"question_id\":33975393,\"title\":\"How to get the window object of a tab created with &#39;chrome.tabs.create()&#39;?\",\"body\":\"<p>I\'m trying to open a new tab and then executing a content-script within the context of that new tab. I tried to do it like this:</p>\\n\\n<pre><code>chrome.tabs.create({ url: \'main.html\' }, function(tab) {\\n    chrome.tabs.executeScript(tab.id, {\\n        code: \'console.log(window.name)\'\\n    });\\n});\\n</code></pre>\\n\\n<p>But that doesn\'t seem to be working, is there any way I can reach directly to the window object of my newly created tab (something like <code>chrome.extension.getViews({tabId: tab.id})</code>)?</p>\\n\"},{\"owner\":{\"reputation\":1,\"profile_image\":\"https://www.gravatar.com/avatar/c436c1dda66f4a4be11920f3ea6b15e6?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"jbaflyer\"},\"is_answered\":false,\"last_activity_date\":1448751318,\"creation_date\":1448751318,\"question_id\":33977394,\"title\":\"Purple warning pop-up window when installing unknown .exe\",\"body\":\"<p>I have written a program using a self-installer that uses Windows Task Scheduler.  The issue is if this program is installed it says it is potential malware.  How do I overcome this?  Registering the software, etc? <a href=\\\"http://clientportal.softwaresecure.com/support/index.php?/Knowledgebase/Article/View/292/46/windows-8-when-trying-to-install-rpnow-i-receive-a-message-windows-smartscreen-prevented-an-unrecognized-app-from-starting\\\" rel=\\\"nofollow\\\">Error Image</a></p>\\n\"},{\"owner\":{\"reputation\":11,\"profile_image\":\"https://www.gravatar.com/avatar/2f4ce7314a8fa08f3b821b1d03e804b7?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"thurstjo63\"},\"is_answered\":false,\"last_activity_date\":1448749479,\"creation_date\":1448749479,\"question_id\":33977115,\"title\":\"Shopify web app in iframe launches popup window via javascript\",\"body\":\"<p>I have a web app in shopify that needs to have a popup window showing content coming from a 3rd party site. The web app is already setup to use an app proxy so I have no problem showing the initial products page and the product detail page. On the product detail page, I need to be able to show a popup widget that will step the user through customising their order before doing checkout and completing the transaction. I could use some help with getting the popup window to work because presently I\'m having no luck whatsoever. Do I need to add the javascript directly to the web app page and does the fact that it works via app proxy that sends the original request from the domain of the shopify page to the domain of the app prevent me from doing this?</p>\\n\"},{\"owner\":{\"reputation\":6,\"profile_image\":\"https://i.stack.imgur.com/y3K2P.png?s=128&g=1\",\"display_name\":\"Bliitzkr3ig\"},\"is_answered\":false,\"last_activity_date\":1448743385,\"creation_date\":1448743385,\"question_id\":33976256,\"title\":\"Present View Controller when the view is not in the window hierarchy\",\"body\":\"<pre><code>import AVFoundation\\nimport UIKit\\nimport AVKit\\n\\nclass Class1: UIViewController {\\n\\n\\nvar playerViewController = AVPlayerViewController()\\nvar playerView = AVPlayer()\\nvar playerTimer = NSTimer()\\n\\n\\noverride func viewDidAppear(animated:Bool) {\\n    let fileURL = NSURL(fileURLWithPath: \\\"file.mp4\\\")\\n\\n    playerView = AVPlayer(URL: fileURL)\\n\\n    playerViewController.player = playerView\\n\\n    self.presentViewController(playerViewController, animated: true){\\n        self.playerViewController.player?.play()\\n        self.playerTimer = NSTimer.scheduledTimerWithTimeInterval(4.0, target: self, selector:Selector(\\\"stopAfter4seconds:\\\"), userInfo: nil, repeats: false)\\n    }\\n\\n}\\nfunc stopAfter4seconds(timer: NSTimer){\\n    self.playerViewController.player?.pause()\\n    self.playerViewController.player = nil\\n    self.presentingViewController?.dismissViewControllerAnimated(false, completion: nil)\\n    self.presentViewController(GameViewController1(), animated: false, completion: nil)\\n}\\n\\n\\noverride func didReceiveMemoryWarning() {\\n    super.didReceiveMemoryWarning()\\n\\n\\n}\\n</code></pre>\\n\\n<p>}</p>\\n\\n<p>My Problem is that when I present the line:</p>\\n\\n<pre><code>self.presentViewController(GameViewController1(), animated: false, completion: nil)\\n</code></pre>\\n\\n<p>I Get the error \\\"attempt to present GameViewController1... whose view is not in the window hierarchy!\\\"</p>\\n\\n<p>I made sure to play it in viewDidAppear as to add it to the view hierarchy but it doesn\'t seem to do so</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":357,\"profile_image\":\"https://www.gravatar.com/avatar/3c17274ecab0ea5196fed1d0893f2660?s=128&d=identicon&r=PG\",\"display_name\":\"user2295633\"},\"is_accepted\":true,\"score\":1,\"last_activity_date\":1401734592,\"creation_date\":1401734592,\"answer_id\":24001185,\"question_id\":23982032},{\"owner\":{\"reputation\":53,\"profile_image\":\"https://i.stack.imgur.com/RmtIx.jpg?s=128&g=1\",\"display_name\":\"parasrish\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448741465,\"creation_date\":1448741465,\"answer_id\":33975946,\"question_id\":23982032}],\"owner\":{\"reputation\":620,\"profile_image\":\"https://www.gravatar.com/avatar/2615dfb5dabb3942d73d312f21becc3e?s=128&d=identicon&r=PG\",\"display_name\":\"user1888243\"},\"is_answered\":true,\"last_activity_date\":1448741465,\"creation_date\":1401640496,\"question_id\":23982032,\"title\":\"Writing to Portable Window Disk from Mac\",\"body\":\"<p>I have an external drive that I use with my Windows laptop, and contains all my important files. The drive is in NTFS format. </p>\\n\\n<p>Now, on my Mac laptop, I have installed a Windows 7 virtual machine (using Virtualbox).  When I try to write to the portable disk from the virtual machine, it says it is write protected, and thus I can\'t write  to it.  Now, I think I can easily change the setting so that the portable disk is not write protected; however, my questions is the following:</p>\\n\\n<p><strong>If I write from the Windows virtual machine on Mac to this portable disk, is there any chance of damaging the disk based on incompatible formatting of Mac and Windows, and losing files?</strong></p>\\n\\n<p>Thanks for your response</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":9650,\"profile_image\":\"https://www.gravatar.com/avatar/d2167fd4bd9f61c76395427d73b3993d?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"Thomas Dickey\"},\"is_accepted\":true,\"score\":1,\"last_activity_date\":1448740475,\"creation_date\":1448740475,\"answer_id\":33975767,\"question_id\":33974641}],\"owner\":{\"reputation\":42,\"profile_image\":\"https://graph.facebook.com/100004210362890/picture?type=large\",\"display_name\":\"Tao Lu\"},\"is_answered\":true,\"last_activity_date\":1448740475,\"creation_date\":1448733972,\"question_id\":33974641,\"title\":\"ncurses non-blocking read pushes cursor to bottom of window\",\"body\":\"<p>My game\'s main loop relies on a non-blocking read from getnstr. It checks whether the string to which it has read has non-zero length before proceeding with the rest of the loop (I couldn\'t find the convention for getting this behavior if one exists).</p>\\n\\n<p>The problem is that it has the effect of forcing the input cursor down the bottom of the window, as if I had spammed Enter or something.</p>\\n\\n<pre><code>    char command[5];\\n    timeout(0);\\n    while (getnstr(command, 4) &amp;&amp; gameActive) {\\n        if (strlen(command) == 0) { continue; } \\n        ... \\n    }\\n</code></pre>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":4698,\"profile_image\":\"https://www.gravatar.com/avatar/f55b8cc42987a9258e073e3165e18d68?s=128&d=identicon&r=PG\",\"display_name\":\"canuckistani\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1344872856,\"creation_date\":1344872856,\"answer_id\":11937788,\"question_id\":11916638}],\"owner\":{\"reputation\":1144,\"profile_image\":\"https://i.stack.imgur.com/jvgB3.jpg?s=128&g=1\",\"display_name\":\"Shatu\"},\"is_answered\":false,\"last_activity_date\":1448740356,\"creation_date\":1344710217,\"question_id\":11916638,\"title\":\"How to track Window Minimization/Maximization using Addon SDK?\",\"body\":\"<p>How can I determine when a window is minimized and revoked(maximized) using <code>Addon SDK</code>?</p>\\n\\n<p>Apparently I am calculating the user browsing time so I need to start and stop a timer on window maximization and minimization respectively.</p>\\n\\n<p>I want to do it from the Addon Code itself, and not by message passing from Content Script after OnBlur event because that is too unreliable.</p>\\n\\n<p>I think something like this is on the cards .. <a href=\\\"http://stackoverflow.com/questions/10767068/firefox-extension-check-if-window-is-minimized\\\">Firefox extension: check if window is minimized</a></p>\\n\\n<p>But I don\'t know how to use XPCOM.</p>\\n\\n<p>Please help me with the code.</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":2096,\"profile_image\":\"https://i.stack.imgur.com/B2NDF.jpg?s=128&g=1\",\"display_name\":\"psaraj12\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1412583754,\"creation_date\":1412583754,\"answer_id\":26212342,\"question_id\":26034528},{\"owner\":{\"reputation\":1,\"profile_image\":\"https://www.gravatar.com/avatar/aa4778ade96dce00776ac2ae94c50de1?s=128&d=identicon&r=PG\",\"display_name\":\"Rahul\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448735071,\"last_edit_date\":1448735071,\"creation_date\":1448733623,\"answer_id\":33974575,\"question_id\":26034528}],\"owner\":{\"reputation\":79,\"profile_image\":\"https://www.gravatar.com/avatar/fef4e107955d911f7f7e77e2d45073d4?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"Alone\"},\"is_answered\":false,\"last_activity_date\":1448735071,\"creation_date\":1411635836,\"question_id\":26034528,\"title\":\"Not able to install Oracle developer suite 10g on window 7\",\"body\":\"<p>I am try to install oracle developer suite 10g (32bit) on window 7.</p>\\n\\n<p>Actually I want to install oracle form which is in complete option of Installation window. \\nI have already solved swap memory issue and compatibility issues.\\noracle developer suite 10g Installer met all Requirement.</p>\\n\\n<p>I have passed all requirement with is follow snap-shot:</p>\\n\\n<p><img src=\\\"http://i.stack.imgur.com/Rxj8S.png\\\" alt=\\\"enter image description here\\\"></p>\\n\\n<p>After I got Installation window, I select Complete Installation option.</p>\\n\\n<p>I am reached up to follow window but few second it get Automatically close :</p>\\n\\n<p><img src=\\\"http://i.stack.imgur.com/e1GgO.png\\\" alt=\\\"enter image description here\\\"></p>\\n\\n<p>Two-Three time I have tried to installation but every time installation get close before coming Oracle product installation list.</p>\\n\\n<p>I am completely blank, why this ? </p>\\n\\n<p>Please some body help me for solving this issue.</p>\\n\"},{\"owner\":{\"reputation\":418,\"profile_image\":\"https://www.gravatar.com/avatar/c8e1daf73bdb957276e472a5b335f5e5?s=128&d=identicon&r=PG\",\"display_name\":\"Alex\"},\"is_answered\":false,\"last_activity_date\":1448735057,\"creation_date\":1448735057,\"question_id\":33974832,\"title\":\"Format XAML UserControl and Window attributes on seperate line\",\"body\":\"<p>In Visual Studio, I would like to configure the formatter such that UserControl or Window tags have their attributes on separate lines, but all other types have their attributes on the same line.</p>\\n\\n<p>The standard formatter configuration places all the xmlns attributes into a long (and rather unwieldy) statement, which makes the code hard to read.</p>\\n\\n<p>I\'ve tried the formatter options, but the best I can get is to have attributes for all types on separate lines, which leads to untidy Setter blocks.</p>\\n\\n<p>Is this possible in Visual Studio 2013?</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":3863,\"profile_image\":\"https://www.gravatar.com/avatar/99fb9f1299e1dfc4d1efcfa3d2dc4c78?s=128&d=identicon&r=PG\",\"display_name\":\"bhspencer\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448732940,\"last_edit_date\":1448732940,\"creation_date\":1448732306,\"answer_id\":33974352,\"question_id\":33974309},{\"owner\":{\"reputation\":10820,\"profile_image\":\"https://www.gravatar.com/avatar/13608abadc97e3b7ea882447dab9f79f?s=128&d=identicon&r=PG\",\"display_name\":\"swapnesh\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448732755,\"last_edit_date\":1448732755,\"creation_date\":1448732639,\"answer_id\":33974408,\"question_id\":33974309},{\"owner\":{\"reputation\":950,\"profile_image\":\"https://i.stack.imgur.com/Oz1V7.png?s=128&g=1\",\"display_name\":\"yelliver\"},\"is_accepted\":false,\"score\":0,\"last_activity_date\":1448733887,\"creation_date\":1448733887,\"answer_id\":33974621,\"question_id\":33974309}],\"owner\":{\"reputation\":4,\"profile_image\":\"https://www.gravatar.com/avatar/5b59f68ed4b22b29ace0b989d5b4dbe8?s=128&d=identicon&r=PG&f=1\",\"display_name\":\"shady\"},\"is_answered\":false,\"last_activity_date\":1448733887,\"creation_date\":1448732051,\"question_id\":33974309,\"title\":\"why can&#39;t I get the content of another window?\",\"body\":\"<p>I am a javascript beginner . I wrote a javascript code to open a website in new window and then get the content of that new window and display it in the first window .. and this is the code :</p>\\n\\n<pre><code>    &lt;!DOCTYPE html&gt;\\n&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;\\n&lt;div id=\\\"display\\\"&gt;&lt;/div&gt;\\n&lt;script type=\\\"text/javascript\\\"&gt;\\nvar newwin=window.open(\\\"http://www.w3schools.com\\\");\\nnewwin.onload=function () \\n{display.innerHTML = newwin.document.documentElement.innerHTML;};\\n&lt;/script&gt;\\n&lt;/body&gt;&lt;/html&gt;\\n</code></pre>\\n\\n<p>It didn\'t work .. the web site opened in the new window but the content didn\'t appear in the first window .. why?\\nthanks in advance.</p>\\n\"},{\"answers\":[{\"owner\":{\"reputation\":5574,\"profile_image\":\"https://i.stack.imgur.com/9Ckyw.png?s=128&g=1\",\"display_name\":\"sebastian\"},\"is_accepted\":true,\"score\":1,\"last_activity_date\":1448730112,\"creation_date\":1448730112,\"answer_id\":33973962,\"question_id\":33973721}],\"owner\":{\"reputation\":93,\"profile_image\":\"https://lh6.googleusercontent.com/-9XBvG3jotdE/AAAAAAAAAAI/AAAAAAAAAA8/ypGb45ZjubE/photo.jpg?sz=128\",\"display_name\":\"Viraj Shah\"},\"is_answered\":true,\"last_activity_date\":1448730112,\"creation_date\":1448728592,\"question_id\":33973721,\"title\":\"Python Qt 4 not initializing window\",\"body\":\"<p>I am just learning PyQt4. I am running Linux Mint (Ubuntu 14.04 based), with the package <code>python-qt4</code> installed. I have the following code:</p>\\n\\n<pre><code>import sys\\nfrom PyQt4 import QtGui\\n\\napp = QtGui.QApplication(sys.argv)\\n\\nwindow = QtGui.QWidget()\\nwindow.show()\\n</code></pre>\\n\\n<p>I am using both PyDev, and my terminal to run the application yet the program terminates within 1 second, without showing any window.</p>\\n\\n<p>Any help would be much appreciated!</p>\\n\"},{\"owner\":{\"reputation\":77,\"profile_image\":\"https://i.stack.imgur.com/NGOeE.png?s=128&g=1\",\"display_name\":\"Michael_mhr\"},\"is_answered\":false,\"last_activity_date\":1448724942,\"creation_date\":1448724942,\"question_id\":33973111,\"title\":\"mac app crash when click window\",\"body\":\"<p>I\'m writing on a Mac app, that acts as a Tcp server for my iOS App. The App is completely written in swift. In the window I show the TcpLog in a NSScrollView. The App works well, when the window is inactive but when I click it to get it to front the app crashes in the main thread (thread 1).</p>\\n\\n<p>I had no success in troubleshooting, yet</p>\\n\\n<p>Does anyone know where the problem can be or had the same poblem?</p>\\n\\n<p>Thanks</p>\\n\"},{\"owner\":{\"reputation\":607,\"profile_image\":\"https://i.stack.imgur.com/vvLpo.jpg?s=128&g=1\",\"display_name\":\"B. Davis\"},\"is_answered\":false,\"last_activity_date\":1448724174,\"creation_date\":1448379765,\"question_id\":33897905,\"title\":\"Compressed y-axis in R studio plotting window\",\"body\":\"<p>I am trying to plot a raster in R Studio and continue to get an image like the one below.  As you can see the y-axis is completely compressed. I am using the this code</p>\\n\\n<pre><code>library(raster)\\nr &lt;- raster(nrows=10, ncols=10)\\nr &lt;- setValues(r, 1:ncell(r))\\nplot(r)\\n</code></pre>\\n\\n<p><a href=\\\"http://i.stack.imgur.com/iGts2.jpg\\\" rel=\\\"nofollow\\\"><img src=\\\"http://i.stack.imgur.com/iGts2.jpg\\\" alt=\\\"![enter image description here\\\"></a> </p>\\n\\n<p>Within R I can create the correct plot.  Moreover, two weeks ago I was running the same code and was able to generate correct raster plots with expanded y-axes.  I suspect the issue is a local problem on my machine but am out of ideas. I have tried to clear all the plots, restart R Studio, restart my computer, and also test different raster layers. I have also tried <code>dev.off()</code>. My session info is documented below.  Again, I was running the same code last week and had no issues.  </p>\\n\\n<p>Any suggestions as to why I have the compressed y-axis in R Studio when plotting would be appreciated.  </p>\\n\\n<p><strong>Addition</strong> To address the comment below, the issue does not persist when plotting non-rasters unless the new plot is called after a raster plot has been called.  For example, if I open a new session of R Studio and plot <code>plot(-50:50)</code> then all looks OK.  If I open R Studio and try to plot a raster, which results in the compressed y-axis, then all subsequent plots will also have a compressed y-axis unless I click the Clear All button and then run <code>dev.new()</code> Then <code>plot(-50:50)</code> will look OK.  </p>\\n\\n<p>If I run <code>x11(); plot(r)</code> I get the following error indicating problems with the y-axis.</p>\\n\\n<pre><code>Error in plot.window(...) : need finite \'ylim\' values\\nIn addition: Warning messages:\\n1: In xy.coords(x, y, xlabel, ylabel, log) : NAs introduced by coercion\\n2: In min(x) : no non-missing arguments to min; returning Inf\\n3: In max(x) : no non-missing arguments to max; returning -Inf\\n</code></pre>\\n\\n<p>I am nut sure how to open or test the <code>png(r &lt;- tempfile(fileext=\'.png\'))</code> code provided in the comment. </p>\\n\\n<pre><code>&gt; sessionInfo()\\nR version 3.1.3 (2015-03-09)\\nPlatform: i386-w64-mingw32/i386 (32-bit)\\nRunning under: Windows 7 x64 (build 7601) Service Pack 1\\n\\nlocale:\\n[1] LC_COLLATE=English_United States.1252 \\n[2] LC_CTYPE=English_United States.1252   \\n[3] LC_MONETARY=English_United States.1252\\n[4] LC_NUMERIC=C                          \\n[5] LC_TIME=English_United States.1252    \\n\\nattached base packages:\\n[1] stats     graphics  grDevices utils     datasets  methods   base     \\n\\nother attached packages:\\n[1] raster_2.4-20 sp_1.2-1     \\n\\nloaded via a namespace (and not attached):\\n[1] grid_3.1.3      lattice_0.20-29 Rcpp_0.11.2     rgdal_0.9-1    \\n[5] tools_3.1.3   \\n</code></pre>\\n\"}],\"has_more\":true,\"quota_max\":10000,\"quota_remaining\":9654}"

#define kDUMP2 @"{\"items\":[],\"has_more\":false,\"quota_max\":10000,\"quota_remaining\":9581}"

#define dDUMP3 @"{\"items\":[{\"comments\":[{\"score\":0,\"comment_id\":55705032,\"body\":\"if I use window.open, I can access it\"},{\"score\":1,\"comment_id\":55705063,\"body\":\"Are you accessing a page on the same domain?you accessing a page on the same domainyou accessing a page on the same domainyou accessing a page on the same domainyou accessing a page on the same domainyou accessing a page on the same domain In this example the OP is trying to access www.w3schools.com in the child window which presumably is in a different domain.\"},{\"score\":0,\"comment_id\":55705085,\"body\":\"ouch, sorry, got it :). But should explain for more clear\"}],\"score\":0,\"creation_date\":1448732306,\"body\":\"<p>You cannot do this if the child window is from a different domain. Each domain is sandboxed from the others for security reasons.</p>\\n\"},{\"comments\":[{\"score\":0,\"comment_id\":55705055,\"body\":\"have you tried this. Does this work if the new window is not on the same domain as in the case in this example\"},{\"score\":0,\"comment_id\":55705077,\"body\":\"@bhspencer I tried on my local machine before posting... FF + Chromium (using Ubuntu)\"},{\"score\":0,\"comment_id\":55705105,\"body\":\"@bhspencer at my end the only thing browser ask for a confirmation to open, which I mentioned in my answer\"}],\"score\":0,\"creation_date\":1448732639,\"body\":\"<p>Use <code>_parent</code> as a second parameter to position your webpage. (BTW I am assuming you are allowing popups in your browser settings)</p>\\n\\n<p><code>var newwin=window.open(\\\"http://www.w3schools.com\\\", \\\"_parent\\\");</code></p>\\n\"},{\"score\":0,\"creation_date\":1448733887,\"body\":\"<p>There are 2 errors that prevent you:</p>\\n\\n<ol>\\n<li>Different domains</li>\\n<li>Even if same domain, you set onload function after calling window.open(). So the new \\\"onload\\\" behavior never runs  </li>\\n</ol>\\n\\n<p>Solution for same domain:</p>\\n\\n<pre><code>&lt;!DOCTYPE html&gt;\\n&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;\\n&lt;div id=\\\"display\\\"&gt;&lt;/div&gt;\\n&lt;script type=\\\"text/javascript\\\"&gt;\\nvar w=window.open(\\\"another.html\\\");\\nvar tid = setInterval function () {\\n    if (w.document.readyState !== \'complete\')\\n    return;\\n    clearInterval(tid);  \\n    display.innerHTML = w.document.documentElement.innerHTML);  \\n}, 100);\\n&lt;/script&gt;\\n&lt;/body&gt;&lt;/html&gt;\\n</code></pre>\\n\"}],\"has_more\":false,\"quota_max\":10000,\"quota_remaining\":9584}"

#define kDUMP4 @"{\"items\":[{\"score\":0,\"creation_date\":1448742789,\"body\":\"<p>with iteration you could use an array-formula like: (for row 3)</p>\\n\\n<pre><code>=INDIRECT(\\\"R3C\\\"&amp;MAX(COLUMN(3:3)*(LEN(3:3)&gt;0))-1, 0)\\n</code></pre>\\n\\n<p>without you need to exclude the cell itself... having it at column <code>C</code> it would be something like: (for row 3)</p>\\n\\n<pre><code>=INDIRECT(\\\"R3C\\\"&amp;MAX(COLUMN($D3:$ZZ3)*(LEN($D3:$ZZ3)&gt;0))-1, 0)\\n</code></pre>\\n\\n<p>if you want to simply auto fill the formula down then replace the <code>\\\"R3C\\\"</code> with <code>\\\"R\\\"&amp;ROW()&amp;\\\"C\\\"</code></p>\\n\\n<blockquote>\\n  <p>The formulas shown here are array formulas and must be confirmed with <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Enter</kbd>.</p>\\n</blockquote>\\n\"},{\"score\":0,\"creation_date\":1448745943,\"body\":\"<p>If you get inclined to VBA, you could try something like this:</p>\\n\\n<pre><code>\' In C3 type =GetSecondLastColumnValue()\\n\' This function will keep on checking values on column at a time to the right\\n\' If 3 continuous empty cells are found, it will assume that there are no more\\n\' columns with values after that. The last known cell with value will be identified\\n\' and value of column just to its left will be plugged in to column C\\nPublic Function GetSecondLastColumnValue()\\n\\n    Dim Looper As Integer\\n    Looper = 1\\n\\n    Const NoOfContinuousEmptyColumns As Integer = 3\\n\\n    Dim m_Address As String, m_LastKnownColumnWithValue\\n    m_Address = Selection.Address\\n    m_LastKnownColumnWithValue = m_Address\\n\\n    Do\\n        m_Address = Range(m_Address).Offset(0, 1).Address\\n        If Range(m_Address).Value = \\\"\\\" Then\\n            Looper = Looper + 1\\n            If Looper &gt; NoOfContinuousEmptyColumns Then Exit Do\\n        Else\\n            Looper = 1\\n            m_LastKnownColumnWithValue = m_Address\\n        End If\\n    Loop\\n\\n    m_LastKnownColumnWithValue = Range(m_LastKnownColumnWithValue).Offset(0, -1).Address\\n    GetSecondLastColumnValue = Range(m_LastKnownColumnWithValue).Value\\n\\nEnd Function\\n</code></pre>\\n\\n<p>Example:</p>\\n\\n<pre><code>    A   B   C   D   E   F\\n1  abc def      ab  cd\\n2  abc def      xy  zx  st\\n</code></pre>\\n\\n<p>In C1, type <code>=GetSecondLastColumnValue ()</code> and it will be populated with <code>ab</code>.\\nIn C2, type the same formula and it will be populated with <code>zx</code></p>\\n\\n<p>This is just an example of what you can do with VBA. Do <strong>NOT</strong> use this function in production. It is insanely greedy and slow. It\'s just an illustration.</p>\\n\\n<p>This subroutine is much faster:</p>\\n\\n<pre><code>\' This method keeps on going to far right till it reaches the end of the columns\\n\' Then it comes back to the last column with value, and hops to the column to its left, and remembers its value\\n\' That value goes in column C. It loops through all rows you specify in startrow and endrow\\nSub PopulateColumnC()\\n    Dim StartRow As Integer, EndRow As Integer, RowLoop As Integer\\n    StartRow = 1\\n    EndRow = 3\\n\\n    Dim m_Address As String\\n\\n    For RowLoop = StartRow To EndRow\\n        Range(\\\"A\\\" &amp; RowLoop).Select\\n        m_Address = Selection.Address\\n        Do\\n            Selection.End(xlToRight).Select\\n            If m_Address = Selection.Address Then\\n                Selection.End(xlToLeft).Select\\n                Exit Do\\n            Else\\n                m_Address = Selection.Address\\n            End If\\n        Loop\\n        m_Address = Range(Selection.Address).Offset(0, -1).Address\\n        Range(\\\"C\\\" &amp; RowLoop).Value = Range(m_Address).Value\\n    Next\\n\\nEnd Sub\\n</code></pre>\\n\"}],\"has_more\":false,\"quota_max\":10000,\"quota_remaining\":9582}"
static NSString *const kURLDomen = @"https://api.stackexchange.com/2.2/";
//static NSString *const kURLDomen = @"https://google.com/";

@interface MessageManager ()
@property (nonatomic, strong) AFHTTPSessionManager *sessionManager;
@property (nonatomic, strong) NSError *wrongJSONError;
@end

@implementation MessageManager

+ (instancetype)sharedInstance
{
    static MessageManager *sharedInstance = nil;

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
      sharedInstance = [[MessageManager alloc] init];
      sharedInstance.sessionManager = [[AFHTTPSessionManager alloc] initWithBaseURL:[NSURL URLWithString:kURLDomen]];
      sharedInstance.sessionManager.responseSerializer = [AFJSONResponseSerializer serializer];
      sharedInstance.sessionManager.requestSerializer = [AFJSONRequestSerializer serializer];

    });

    return sharedInstance;
}

- (NSError *)wrongJSONError
{
    if (!_wrongJSONError)
    {
        _wrongJSONError = [NSError errorWithDomain:NSURLErrorDomain
                                              code:1000
                                          userInfo:@{ NSLocalizedDescriptionKey: @"Wrong JSON" }];
    }
    return _wrongJSONError;
}

#pragma mark - Public methods

+ (void)getQuestionsForKeyWord:(NSString *)keyWord successBlock:(void (^)(NSArray *questions))successBlock failBlock:(void (^)(NSError *error))failBlock
{
    NSString *uri = [NSString stringWithFormat:@"search?order=desc&sort=activity&intitle=%@&site=stackoverflow&filter=!.FjtmoGIogKGfL93TUUtkPsr5Tsrp", keyWord];

    AFHTTPSessionManager *sessionManager = [MessageManager sharedInstance].sessionManager;

    [sessionManager GET:uri
        parameters:nil
        success:^(NSURLSessionDataTask *_Nonnull task, id _Nonnull responseObject) {
          if (successBlock && responseObject && [responseObject isKindOfClass:[NSDictionary class]])
          {
              NSMutableArray *arr = [NSMutableArray array];
              NSError *error = nil;

              for (NSDictionary *questionDict in responseObject[@"items"])
                  [arr addObject:[[QuestionItem alloc] initWithDictionary:questionDict error:&error]];

              if (error && failBlock)
                  failBlock(error);
              else
                  successBlock([NSArray arrayWithArray:arr]);
          }
          else if (failBlock)
          {
              failBlock([MessageManager sharedInstance].wrongJSONError);
          }

        }
        failure:^(NSURLSessionDataTask *_Nullable task, NSError *_Nonnull error) {
          //
          //          NSData *data = [kDUMP dataUsingEncoding:NSUTF8StringEncoding];
          //          id responseObject = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
          //
          //          NSMutableArray *arr = [NSMutableArray array];
          //          for (NSDictionary *questionDict in responseObject[@"items"])
          //              //                  [arr addObject:[[QuestionItem alloc] initWithString:kDUMP error:nil]];
          //              [arr addObject:[QuestionItem questionItemWithJSONDict:questionDict]];
          //
          //          successBlock([NSArray arrayWithArray:arr]);

          NSLog(@"%@", error);

          if (failBlock)
              failBlock(error);
        }];
}

+ (void)getAnswersForQuestionID:(NSInteger)questionID successBlock:(void (^)(NSArray *answers))successBlock failBlock:(void (^)(NSError *error))failBlock
{
    NSString *uri = [NSString stringWithFormat:@"questions/%ld/answers?order=desc&sort=votes&site=stackoverflow&filter=!LokMss6Ue_YTK90jsLeC0i", (long)questionID];

    AFHTTPSessionManager *sessionManager = [MessageManager sharedInstance].sessionManager;

    [sessionManager GET:uri
        parameters:nil
        success:^(NSURLSessionDataTask *_Nonnull task, id _Nonnull responseObject) {
          if (successBlock && responseObject && [responseObject isKindOfClass:[NSDictionary class]])
          {
              NSMutableArray *arr = [NSMutableArray array];
              NSError *error = nil;

              for (NSDictionary *answerDict in responseObject[@"items"])
                  [arr addObject:[[AnswerItem alloc] initWithDictionary:answerDict error:&error]];

              if (error && failBlock)
                  failBlock(error);
              else
                  successBlock([NSArray arrayWithArray:arr]);
          }
          else if (failBlock)
          {
              failBlock([MessageManager sharedInstance].wrongJSONError);
          }

        }
        failure:^(NSURLSessionDataTask *_Nullable task, NSError *_Nonnull error) {
          //          int i = arc4random() % 3;
          //          NSData *data = nil;
          //          if (i == 1)
          //              data = [kDUMP2 dataUsingEncoding:NSUTF8StringEncoding];
          //          else if (i == 2)
          //              data = [dDUMP3 dataUsingEncoding:NSUTF8StringEncoding];
          //          else
          //              data = [kDUMP4 dataUsingEncoding:NSUTF8StringEncoding];
          //
          //          id responseObject = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
          //
          //          NSMutableArray *arr = [NSMutableArray array];
          //          for (NSDictionary *answerDict in responseObject[@"items"])
          //              //                  [arr addObject:[[QuestionItem alloc] initWithString:kDUMP error:nil]];
          //              [arr addObject:[[AnswerItem alloc] initWithDictionary:answerDict error:&error]];
          //
          //          successBlock([NSArray arrayWithArray:arr]);

          NSLog(@"%@", error);

          if (failBlock)
              failBlock(error);
        }];
}

@end
